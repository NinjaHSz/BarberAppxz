{
  "meta": {
    "project": "BarberApp",
    "date": "2026-01-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "BarberApp is a comprehensive web-based management system tailored for barbershops, focusing on high visual performance and ease of use. It centralizes scheduling, client management, subscription plans, financial control, and revenue KPIs to streamline daily operations.",
  "core_goals": [
    "Provide real-time financial insights including daily, monthly, and annual revenue.",
    "Enable efficient CRUD management of appointments with intuitive inline editing and intelligent autocomplete.",
    "Support full client registration and subscription plan management with billing history and automatic renewal cycles.",
    "Facilitate detailed financial tracking of expenses and credit cards, including payment status and installment logic.",
    "Ensure reliable hybrid data synchronization between Supabase database and Google Sheets as fallback."
  ],
  "key_features": [
    "Dashboard displaying real-time KPIs on revenue from multiple mixed data sources.",
    "Appointment management with functionality to create, read, update, and delete records including client info, service, payment, and scheduling.",
    "Client and subscription plan management handling monthly, semiannual, and annual plans with automatic cycle renewal and payment history linkage.",
    "Financial module for tracking expenses and credit cards, supporting payment statuses and installment identification.",
    "Hybrid synchronization engine that coordinates data between Supabase and Google Sheets for redundancy and data integrity."
  ],
  "user_flow_summary": [
    "User logs into the web app and lands on a KPI dashboard showing up-to-date revenue and financial stats.",
    "User navigates to the appointment management interface to create or modify bookings with direct inline edit and autocomplete for clients and services.",
    "User manages client records by adding new clients or updating plans and payment history.",
    "User accesses the financial module to log expenses, view pending and paid statuses, and manage credit card information.",
    "System periodically synchronizes data bi-directionally between Supabase and Google Sheets to ensure consistency and backup."
  ],
  "validation_criteria": [
    "Synchronization function correctly populates global state from Google Sheets and Supabase without data loss.",
    "Revenue calculations reflect correct aggregation of service appointments and plan payments across daily, monthly, and annual periods.",
    "CRUD operations for clients persist accurately with correct updating of subscription and payment details.",
    "Appointment creation validates date and time conflicts per business rule to prevent double booking.",
    "Expense and credit card management supports full lifecycle with proper status updates and installment tracking."
  ],
  "code_summary": {
    "tech_stack": [
      "JavaScript (Vanilla)",
      "HTML5",
      "Tailwind CSS",
      "Supabase (PostgreSQL)",
      "Google Sheets API (CSV/Script Sync)"
    ],
    "features": [
      {
        "name": "Sync Engine (Multi-source)",
        "description": "Logic for hybrid synchronization between Supabase database and Google Sheets (CSV/Apps Script fallback).",
        "files": [
          "index.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Sync API",
            "version": "1.0.0"
          },
          "paths": {
            "/sync": {
              "get": {
                "summary": "Synchronize records from configured URL",
                "parameters": [
                  {
                    "name": "url",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ]
              }
            }
          }
        }
      },
      {
        "name": "Client & Plans Management",
        "description": "Handles client CRUD, plan subscriptions, and cycle renewals.",
        "files": [
          "index.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Clients API",
            "version": "1.0.0"
          },
          "paths": {
            "/rest/v1/clientes": {
              "get": {
                "summary": "Fetch all clients"
              },
              "patch": {
                "summary": "Update client plan details"
              }
            },
            "/rest/v1/pagamentos_planos": {
              "get": {
                "summary": "Fetch payment history for plans"
              }
            }
          }
        }
      },
      {
        "name": "Financial - Expenses & Cards",
        "description": "Management of accounts payable (expenses) and credit card details.",
        "files": [
          "index.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Expenses API",
            "version": "1.0.0"
          },
          "paths": {
            "/rest/v1/saidas": {
              "get": {
                "summary": "Fetch all expenses"
              }
            },
            "/rest/v1/cartoes": {
              "get": {
                "summary": "Fetch registered cards"
              }
            }
          }
        }
      },
      {
        "name": "Stats & KPIs Engine",
        "description": "Internal logic to calculate daily, monthly, and annual revenue from mixed sources.",
        "files": [
          "index.js"
        ]
      }
    ]
  }
}
